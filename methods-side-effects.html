<html>
  <head>
    <meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
    <title>Bizo Scala Style Guide &mdash; Methods and Side Effects</title>
    <style type='text/css'>
      @import 'css/default.css';
      @import 'css/syntax.css';
    </style>
    <style media='print' type='text/css'>
      @import 'css/print.css';
    </style>
    <meta content='Bizo Scala Style Guide' name='subject'>
    <link href='images/favicon.png' rel='shortcut icon'>
  </head>
  <body>
    <div id='wrap'>
      <div id='header'>
        <a href='http://bizo.github.com/scala-style-guide/' title="Bizo's Scala Style Guide"><img alt='Bizo' src='images/bizo-logo.png'></a>
        <div class='tagline'>Conventions over Obfuscation :)</div>
      </div>
      <div id='pages'>
        <ol class='toc'>
          <li>Start Here
            <ol class="toc">
              <li><a href='index.html'>Introduction</a></li>
            </ol>
          </li>
          <li>Guidelines
            <ol class="toc">
              <li><a href='white-space.html'>White Space</a></li>
              <li><a href='indentation.html'>Indentation</a></li>
              <li><a href='line-wrapping.html'>Line Wrapping</a></li>
              <li><a href='methods-side-effects.html'>Methods &amp; Side Effects</a></li>
              <li><a href='code-blocks.html'>Code Blocks</a></li>
              <li><a href='anonymous-code-blocks.html'>Anonymous Code Blocks</a></li>
              <li><a href='dots-spaces.html'>Dots versus Spaces</a></li>
            </ol>
          </li>
          <li>Reference
            <ol class="toc">
              <li><a href='http://scala-lang.org'>Scala</a></li>
              <li><a href='http://www.bizo.com'>Bizo</a></li>
              <li><a href='http://davetron5000.github.com/scala-style'>Davetron500 Scala Style Guide</a></li>
            </ol>
          </li>
          <li>
            <form action='http://www.google.com/cse' id='searchbox_000:xxx'>
              <input name='cx' type='hidden' value='000:xxx'>
              <input name='cof' type='hidden' value='FORID:0'>
              <input name='q' size='20' type='text'>
              <input name='sa' type='submit' value='Search'>
              <img alt='Google Custom Search' src='http://www.google.com/coop/images/google_custom_search_smnar.gif'>
            </form>
          </li>
        </ol>
      </div>
      <div id='content'>
        <h1 id='methods and side effects'>Methods and Side Effects <a href="https://github.com/bizo/scala-style-guide/edit/master/doc/methods-side-effects.textile">[Edit]</a></h1>
        <ol class="toc"><li>One-line methods: simple expressions</li><li>Side-effecting methods</li><li>Return types</li></ol>
        <h2>One-line methods: simple expressions</h2>
<p>One-line methods with simple expressions do not require braces:</p>
<div class="highlight"><pre><code class="scala">  <span class="c1">// preferred</span>
  <span class="k">def</span> <span class="n">hasNext</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="o">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">end</span><span class="o">)</span>
</code></pre>
</div>
<div class="highlight"><pre><code class="scala">  <span class="c1">// hmmm-kay</span>
  <span class="k">def</span> <span class="n">hasNext</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">i</span> <span class="o">&lt;</span> <span class="n">end</span>
  <span class="o">}</span>
</code></pre>
</div>
<h2>Side-effecting methods</h2>
<p>One-line methods with side-effects should use braces (instead of using equal),</p>
<div class="highlight"><pre><code class="scala">  <span class="c1">// preferred</span>
  <span class="k">def</span> <span class="n">next</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="o">}</span>
</code></pre>
</div>
<div class="highlight"><pre><code class="scala">  <span class="c1">// hmmm-kay</span>
  <span class="k">def</span> <span class="n">next</span><span class="o">()</span> <span class="o">{</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">}</span>
</code></pre>
</div>
<div class="highlight"><pre><code class="scala">  <span class="c1">// wrong: no parenthesis indicating effect</span>
  <span class="k">def</span> <span class="n">next</span> <span class="o">{</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">}</span>
</code></pre>
</div>
<div class="highlight"><pre><code class="scala">  <span class="c1">// wrong: equal sign shouldn&#39;t be used for Unit-returning methods</span>
  <span class="k">def</span> <span class="n">next</span><span class="o">()</span> <span class="k">=</span> <span class="o">{</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">}</span>
</code></pre>
</div>
<div class="highlight"><pre><code class="scala">  <span class="c1">// wrong: equal sign shouldn&#39;t be used for Unit-returning methods</span>
  <span class="k">def</span> <span class="n">next</span><span class="o">()</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="o">}</span>
</code></pre>
</div>
<h2>Return types</h2>
<p>Public and protected methods should explicitly declare their return type:</p>
<div class="highlight"><pre><code class="scala">  <span class="c1">// good</span>
  <span class="k">def</span> <span class="n">compute</span><span class="k">:</span> <span class="kt">Result</span> <span class="o">=</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>
</code></pre>
</div>
<div class="highlight"><pre><code class="scala">  <span class="c1">// wrong: no explicit result type</span>
  <span class="k">def</span> <span class="n">compute</span> <span class="k">=</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>
</code></pre>
</div>
<p>This practice avoids 1) having class users and inheritors having to guess the actual return type and 2) having the return type inadvertently change and thefore avoid unexpected incompatible class changes.</p>
<p>The rule also applies to methods returning Unit.</p>
<div class="highlight"><pre><code class="scala">  <span class="c1">// hmmmm, questionable</span>
  <span class="k">def</span> <span class="n">doSomething</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>

  <span class="c1">// preferred</span>
  <span class="k">def</span> <span class="n">doSomething</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
  <span class="o">}</span>
</code></pre>
</div>
<p>And applies to abstract methods, e.g., in traits or abstract classes,</p>
<div class="highlight"><pre><code class="scala"><span class="c1">// good</span>
<span class="k">trait</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">compute</span><span class="k">:</span> <span class="kt">Result</span>
  <span class="k">def</span> <span class="n">doSomething</span><span class="k">:</span> <span class="kt">Unit</span>
<span class="o">}</span>
</code></pre>
</div>
<div class="highlight"><pre><code class="scala"><span class="c1">// wrong</span>
<span class="k">trait</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">compute</span><span class="k">:</span> <span class="kt">Result</span>
  <span class="k">def</span> <span class="n">doSomething</span><span class="o">()</span>  <span class="c1">// missing &quot;Unit&quot;</span>
<span class="o">}</span>
</code></pre>
</div>
      </div>
      <div id='footer'>Copyright &copy; 2011 Bizo inc.</div>
    </div>
  </body>
</html>
